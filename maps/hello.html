<head>
    <title>Jobs on a map</title>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>Välkommen till jobs on a map!</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            {{> map}}
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <button class="btn btn-success" id="mypos">Var är jag?</button>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <hr/>
            <div class="tabpanel">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation">
                        <a href="#jobb" aria-controls="jobb" role="tab" data-toggle="tab">
                            Jobb
                        </a>
                    </li>
                    <li role="presentation">
                        <a href="#planering" aria-controls="planering" role="tab" data-toggle="tab">
                            Planering
                        </a>
                    </li>
                    <li role="presentation">
                        <a href="#admin" aria-controls="admin" role="tab" data-toggle="tab">
                            Administration
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="jobb">
                        {{> jobPanel }}
                    </div>
                    <div role="tabpanel" class="tab-pane" id="planering">
                        <h1>Planering</h1>
                        {{> planningPanel }}
                    </div>
                    <div role="tabpanel" class="tab-pane" id="admin">
                        <h1>Administration</h1>

                        <h2>Borttagna jobb</h2>
                        {{> deletedJobs }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Button trigger modal -->
    <button type="button" aria-hidden="true" style="display: none;" data-toggle="modal" data-target="#modalDescription" id="popUpButton">
    </button>

    <!-- Modal -->
    <div class="modal fade" id="modalDescription" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modalLabel">Beskrivning</h4>
                </div>
                <div class="modal-body" id="thePopUp">
                    pop up content
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>


<template name="map">
    <div class="map-container">
        {{> googleMap name="map" options=mapOptions}}
    </div>
</template>

<template name="jobPanel">
    <table class="table table-responsive">
        <thead>
        <tr>
            <th>
                Nr
            </th>
            <th>
                Adress
            </th>
            <th>
                Beskrivning
            </th>
            <th>
                Status
            </th>
            <th>
                Centrera
            </th>
        </tr>
        </thead>
        <tbody>
        {{#each jobs}}
            <tr>
                {{> jobLine}}
            </tr>
        {{/each}}
        </tbody>
    </table>
</template>

<template name="jobLine">
    <td>
        {{nr}}
    </td>
    <td>
        <div>{{address}}</div>
    </td>
    <td>
        <div>{{description}}</div>
    </td>
    <td>
        <button class="status">{{status}}</button>
    </td>
    <td>
        <button class="panTo">&#10807;</button>
    </td>
</template>

<template name="planningPanel">
    <table class="table table-responsive">
        <thead>
        <tr>
            <th>
                Nr
            </th>
            <th>
                Adress
            </th>
            <th>
                Beskrivning
            </th>
            <th>
                Status
            </th>
            <th>
                Centrera
            </th>
            <th>
                Ta bort
            </th>
        </tr>
        </thead>
        <tbody>
        {{#each jobs}}
            <tr>
                {{> planningLine}}
            </tr>
        {{/each}}
        </tbody>
    </table>
</template>

<template name="planningLine">
    <td>
        <input type="text" name="nr" class="nr" value="{{nr}}" size="2"/>
    </td>
    <td>
        <textarea name="address" class="address">{{address}}</textarea>
    </td>
    <td>
        <textarea name="description" class="description">{{description}}</textarea>
    </td>
    <td>
        <button class="status">{{status}}</button>
    </td>
    <td>
        <button class="panTo">&#10807;</button>
    </td>
    <td>
        <button class="delete">&times;</button>
    </td>
</template>

<template name="deletedJobs">
    <table class="table table-responsive">
        <thead>
        <tr>
            <th>
                Nr
            </th>
            <th>
                Adress
            </th>
            <th>
                Beskrivning
            </th>
            <th>
                Status
            </th>
            <th>
                Borttagen
            </th>
            <th>
                Centrera
            </th>
            <th>
                Återställ
            </th>
        </tr>
        </thead>
        <tbody>
        {{#each jobs}}
            <tr>
                {{> deletedJobLine}}
            </tr>
        {{/each}}
        </tbody>
    </table>
</template>

<template name="deletedJobLine">
    <td>
        {{nr}}
    </td>
    <td>
        <div>{{address}}</div>
    </td>
    <td>
        <div>{{description}}</div>
    </td>
    <td>
        {{status}}
    </td>
    <td>
        {{deletedDate}}
    </td>
    <td>
        <button class="panTo">&#10807;</button>
    </td>
    <td>
        <button class="restore">Åter</button>
    </td>
</template>